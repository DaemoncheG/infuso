// @include inx.panel

inx.form=inx.panel.extend({constructor:function(p){if(p.labelWidth===undefined)p.labelWidth=150;p.layout="inx.form.layout";if(p.padding===undefined)p.padding=15;this.base(p);},__defaultChildType:"inx.textfield",cmd_setData:function(data){if(!data)return;for(var i=0;i<this.items.length;i++){var cmp=inx(this.items[i]);var name=cmp.info("name");var val=data[name];if(val!==undefined)
cmp.cmd("setValue",val)}}});inx.css(".inx-form-label-left{margin-right:20px;}",".inx-form-label-top{margin-bottom:5px;}");inx.form.layout={create:function(){this.base();this.private_sizer=$("<div>").appendTo(this.__body);},add:function(cmp){cmp=inx(cmp);var label=$("<div>").appendTo(this.__body).css({position:"absolute"}).html(cmp.info("param","label")||"");var container=$("<div>").css({position:"absolute"}).appendTo(this.__body);cmp.cmd("render",container);cmp.data("label",label);cmp.data("container",container);},remove:function(cmp){$(cmp.data("container")).remove();$(cmp.data("label")).remove();},sync:function(){var bodyWidth=this.private_sizer.width();var p=this.private_padding*1||0;var y=0;for(var i in this.items){var item=inx(this.items[i]);var container=item.data("container");var label=item.data("label");var lw=item.info("param","labelWidth");if(lw===undefined)lw=this.labelWidth;if(lw===undefined)lw=150;switch(item.info("param","labelAlign")){case"left":label.css({left:p,top:y+p,width:lw});container.css({left:p+lw,top:y+p,width:bodyWidth-p*2-lw});y+=Math.max(label.height(),item.info("height"));break;default:case"top":label.css({left:p,top:y+p,width:bodyWidth});y+=label.height();y+=4;container.css({left:p,top:y+p,width:bodyWidth});y+=item.info("height");break;}
y+=10;}
this.private_sizer.css({height:y});if(this.private_sizer.width()!=bodyWidth)
this.task("syncLayout");},hash:function(){return this.private_sizer.width();}}